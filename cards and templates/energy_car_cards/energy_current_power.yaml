# Energy Card - Current Power Consumption
# Dynamic color based on consumption level
type: custom:button-card
entity: sensor.w_shelly_todos_juntos
name: PotÃªncia Atual
icon: mdi:flash
template: info_card
state_display: |
  [[[
    return Math.round(entity.state) + " W";
  ]]]
styles:
  card:
    - background: |
        [[[
          var power = parseFloat(entity.state);
          if (power > 5000) return "var(--red)";
          else if (power > 2000) return "var(--yellow)";
          else return "var(--contrast2)";
        ]]]
  state:
    - color: |
        [[[
          var power = parseFloat(entity.state);
          if (power > 5000) return "var(--black)";
          else if (power > 2000) return "var(--black)";
          else return "var(--contrast20)";
        ]]]
  name:
    - color: |
        [[[
          var power = parseFloat(entity.state);
          if (power > 2000) return "var(--black)";
          else return "var(--contrast16)";
        ]]]
  icon:
    - color: |
        [[[
          var power = parseFloat(entity.state);
          if (power > 2000) return "var(--black)";
          else return "var(--contrast20)";
        ]]]
view_layout:
  grid-column: span 2
